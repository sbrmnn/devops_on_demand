function bindCloudinaryElement(){
    $.cloudinary.config({ cloud_name: 'yumfog-com',  api_key: '165496118466817'});
    $('.cloudinary-fileupload').bind('cloudinarydone', function(e, data) {
         renderProfileImagePreview(data.result.public_id)
        return true;
    });

    if($.fn.cloudinary_fileupload !== undefined) {
        $("input.cloudinary-fileupload[type=file]").cloudinary_fileupload();
    }
}

function renderProfileImagePreview(public_id){
    if (Boolean(public_id)){
        <% dim = ProfileImageDimensions.instance %>
        var options = {crop: "<%= dim.crop %>", gravity: "<%= dim.gravity %>", width: <%= dim.width %>, height: <%= dim.height %> }
      $('.profile-image-preview').html(
          $.cloudinary.image(public_id, options)
      );
    }
}

function validateFiles(inputFile){
    var allowedExtension, extError, extErrorMessage, extName, maxExceededMessage, maxFileSize, sizeExceeded;
    maxExceededMessage = 'This file exceeds the maximum allowed file size (8 MB)';
    extErrorMessage = 'Only image file with extension: .jpg, or .png is allowed';
    allowedExtension = ['jpg', 'png'];
    extName = void 0;
    maxFileSize = $(inputFile).data('max-file-size');
    sizeExceeded = false;
    extError = false;
    $.each(inputFile.files, function() {
        if (this.size && maxFileSize && this.size > parseInt(maxFileSize)) {
            sizeExceeded = true;
        }
        extName = this.name.split('.').pop();
        if ($.inArray(extName, allowedExtension) === -1) {
            extError = true;
        }
    });
    if (sizeExceeded) {
        window.alert(maxExceededMessage);
        $(inputFile).val('');
    }
    if (extError) {
        window.alert(extErrorMessage);
        $(inputFile).val('');
    }
};











