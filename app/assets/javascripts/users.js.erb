
$( document ).ready(function() {
    bindCloudinaryElement();
    var public_id = $('#freelancer_profile_photo').val()
    renderProfileImagePreview(public_id)
});


function bindCloudinaryElement(){
    $.cloudinary.config({ cloud_name: 'yumfog-com',  api_key: '165496118466817'});
    <% dim = ProfileImageDimensions.instance %>
    $('.cloudinary-fileupload').bind('cloudinarydone', function(e, data) {
        <% dim = ProfileImageDimensions.instance %>
        renderProfileImagePreview(data.result.public_id)
        return true;
    });

    if($.fn.cloudinary_fileupload !== undefined) {
        $("input.cloudinary-fileupload[type=file]").cloudinary_fileupload();
    }
}

function renderProfileImagePreview(public_id){
    if (Boolean(public_id)){
      var options = {crop: "<%= dim.crop %>", gravity: "<%= dim.gravity %>", width: <%= dim.width %>, height: <%= dim.height %> }
      $('.profile-image-preview').html(
          $.cloudinary.image(public_id, options)
      );
    }
}

